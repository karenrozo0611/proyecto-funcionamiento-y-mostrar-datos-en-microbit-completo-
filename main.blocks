<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="W/o8#W73s9@BtUYDHt6C">MAX30102_I2C_ADDRESS</variable><variable id="KChT_w}V!1]qu1uKbrrU">MAX30102_MODE_CONFIG</variable><variable id="?-,MR66$JQ)_uJ=2pHn8">MAX30102_PARTICLE_CONFIG</variable><variable id="4(mNtdex@F1dn|7l/!EF">MAX30102_LED_CONFIG</variable><variable id="m=?6,_e0sTjeNL,+7I!N">data2</variable><variable id="#pcDEJnqw~JdC9tyv/GA">data</variable><variable id="20QG6cZr)f=qh[IIuVG@">x</variable><variable id="EZqh,(4kz4o8HC8=Lok]">y</variable><variable id="y7vdb+~~]B^LZz76yDr/">z</variable><variable id="H{dY@@XjSOrAtcz0^q1[">temp</variable></variables><block type="pxt-on-start" id="3%jpzla%p*~zw|.{gL!O" x="0" y="0"><statement name="HANDLER"><block type="device_print_message" id="qSRlhad7qv?pd{GGj5tZ"><value name="text"><shadow type="text" id="Ce4^f3Z;WyYlv4j!nus:"><field name="TEXT">Hello!</field></shadow></value><next><block type="variables_set" id="fH2uKMXyfdR]4PUFz^p_"><field name="VAR" id="W/o8#W73s9@BtUYDHt6C">MAX30102_I2C_ADDRESS</field><comment pinned="false" h="80" w="160">Dirección I2C del MAX30102</comment><value name="VALUE"><shadow type="math_number" id="nVH,A0p_0=WRhUnfd5K}"><field name="NUM">104</field></shadow></value><next><block type="variables_set" id="3r)xH@-B$t4ce]qeDdx3"><field name="VAR" id="KChT_w}V!1]qu1uKbrrU">MAX30102_MODE_CONFIG</field><comment pinned="false" h="80" w="160">Registro de configuración del MAX30102</comment><value name="VALUE"><shadow type="math_number" id="Zp6m,H{f95n:)gsG{*:%"><field name="NUM">9</field></shadow></value><next><block type="variables_set" id="W!5]=T[cHPm4h1~x}V-8"><field name="VAR" id="4(mNtdex@F1dn|7l/!EF">MAX30102_LED_CONFIG</field><value name="VALUE"><shadow type="math_number" id="2_x5{0yb)Ol@}0x]ciLM"><field name="NUM">10</field></shadow></value><next><block type="variables_set" id="sAfio,ZhAD2#,uyy84i|"><field name="VAR" id="?-,MR66$JQ)_uJ=2pHn8">MAX30102_PARTICLE_CONFIG</field><value name="VALUE"><shadow type="math_number" id="G$4N9V#e)+@t{7#YKh)u"><field name="NUM">11</field></shadow></value><next><block type="function_call" id="jg=PhgN$Ip$M$ySfqX@Z"><mutation name="setupMAX30102" functionid="f=FGrERMM-M0te7~4_c~"></mutation><comment pinned="false" h="80" w="160">Configurar el sensor al inicio</comment><next><block type="bluetooth_start_uart_service" id="m0M!G]j2V.}0VMcKvPEE"><comment pinned="false" h="80" w="160">Inicializar Bluetooth</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_forever" id="Tm2U3]);g[ud|70oaDN0" x="438" y="0"><comment pinned="false" h="80" w="160">Bucle principal</comment><statement name="HANDLER"><block type="variables_set" id="!CJyNApXe9`MC+-j2dNW"><field name="VAR" id="#pcDEJnqw~JdC9tyv/GA">data</field><comment pinned="false" h="80" w="160">Leer datos del sensor MAX30102</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id=";wjx,Ph/)7`)p#)JI57!"><mutation name="readSensorData" functionid="3nF4*f_E!h(qWZsfx:4H"></mutation></block></value><next><block type="serial_writeline" id="pT;8Mad41UVR$Mw.ySpP"><comment pinned="false" h="80" w="160">Mostrar los datos del MAX30102 en la consola serial y enviarlos por Bluetooth</comment><value name="text"><block type="text_join" id="+%f)obcM/z?htAKcsqej"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="hr$`{oHZMFe[7%k:d|I~"><field name="TEXT">MAX30102 Data: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id=";:`dlYH)W--#7~fSe{=("><field name="VAR" id="#pcDEJnqw~JdC9tyv/GA">data</field></block></value></block></value><next><block type="bluetooth_uart_line" id="8rVdaqO}nL;!-y*z;X@w"><value name="data"><block type="text_join" id="MgzH8/~gO5hY[Re2D$pW"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="WXE*3N;B$^j/%`RRERNu"><field name="TEXT">MAX30102 Data: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="_@Tv^qX[Q1v`ypmek+4z"><field name="VAR" id="#pcDEJnqw~JdC9tyv/GA">data</field></block></value></block></value><next><block type="device_show_number" id="wD$1Q??{IN;9ROv(pTu{"><value name="number"><block type="variables_get" id="o$hx3KRw{qB=*Q^lUMXV"><field name="VAR" id="#pcDEJnqw~JdC9tyv/GA">data</field></block></value><next><block type="device_pause" id="hnE^:qBW.HWkB[-6LYLF"><value name="pause"><shadow type="timePicker" id="xJVj/[ngJ#U[24ZNVJ7T"><field name="ms">1000</field></shadow></value><next><block type="variables_set" id="^l,;T3aN@[rnP02AaLeh"><field name="VAR" id="20QG6cZr)f=qh[IIuVG@">x</field><comment pinned="false" h="80" w="160">Leer valores del acelerómetro</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_acceleration" id="h+~_YpcF*@4qLYFJk,]|"><field name="NAME">Dimension.X</field></block></value><next><block type="variables_set" id="*1`u]A6=~t}P!Q}LAZ20"><field name="VAR" id="EZqh,(4kz4o8HC8=Lok]">y</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_acceleration" id="_)12.cgn5D0H|o%=GMlj"><field name="NAME">Dimension.Y</field></block></value><next><block type="variables_set" id="Fe;;a4CaZu*c|W1}F`{$"><field name="VAR" id="y7vdb+~~]B^LZz76yDr/">z</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_acceleration" id="$z]b$KHow5#7Wn-JU.~)"><field name="NAME">Dimension.Z</field></block></value><next><block type="serial_writeline" id="Of?/e@VKXQ|(m@mH/Vpz"><comment pinned="false" h="80" w="160">Mostrar los valores de aceleración en la consola serial y enviarlos por Bluetooth</comment><value name="text"><block type="text_join" id="Bp,@]Rvq9$01~M2ISbXq"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="t.4)@]NF_aR8BE9!4LH5"><field name="TEXT">Aceleración X: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="/;N!b)2_eA!pp}b.KuT-"><field name="VAR" id="20QG6cZr)f=qh[IIuVG@">x</field></block></value><value name="ADD2"><shadow type="text" id="Y:^s3+0[r1;=]/pWBXp1"><field name="TEXT"> mg</field></shadow></value></block></value><next><block type="serial_writeline" id="3bD.7W~x[8K}WRF~DUJZ"><value name="text"><block type="text_join" id=".MZs7?^EFON^[%D0-}Gt"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="Vou%iBr,9,gVMF=n#9Pd"><field name="TEXT">Aceleración Y: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="^0YP-VSA.h:fNP8weacM"><field name="VAR" id="EZqh,(4kz4o8HC8=Lok]">y</field></block></value><value name="ADD2"><shadow type="text" id="bq):JI:y|Lm3TwXHrUa-"><field name="TEXT"> mg</field></shadow></value></block></value><next><block type="serial_writeline" id="u2]xbN_#d)v,}kI2U)OI"><value name="text"><block type="text_join" id="jhXqC@lb@2;vU+k*A6Us"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="5MHU;xElOlH=vc!5wST;"><field name="TEXT">Aceleración Z: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="-7$X5c=P]S=34-T${q5L"><field name="VAR" id="y7vdb+~~]B^LZz76yDr/">z</field></block></value><value name="ADD2"><shadow type="text" id="%WD!D3P+;2HN_=TS@CI]"><field name="TEXT"> mg</field></shadow></value></block></value><next><block type="bluetooth_uart_line" id="qpX@HO=ov9YKI(0i;F{v"><value name="data"><block type="text_join" id="AKFvvSx%7%a?By!@|Gby"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="0J.V`55t:*3lB+[OC$7$"><field name="TEXT">Aceleración X: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="M$.pk6Wo}1p%_lvRU}LW"><field name="VAR" id="20QG6cZr)f=qh[IIuVG@">x</field></block></value><value name="ADD2"><shadow type="text" id="ZTy~jAaDLyKD`i`$4CLb"><field name="TEXT"> mg</field></shadow></value></block></value><next><block type="bluetooth_uart_line" id="$vdcA1RX}5f/U4au%w`4"><value name="data"><block type="text_join" id="d/w4.hDbW0Xc(@lre^uD"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="A-4MLq2=YUX~u]}kNxRK"><field name="TEXT">Aceleración Y: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="CytKgg.s$Fd2E}`FAd]v"><field name="VAR" id="EZqh,(4kz4o8HC8=Lok]">y</field></block></value><value name="ADD2"><shadow type="text" id="Y|VTK2]mt5R]#5OFzA$b"><field name="TEXT"> mg</field></shadow></value></block></value><next><block type="bluetooth_uart_line" id="(Wj8u9Jkn1v`p#Pf13mc"><value name="data"><block type="text_join" id="4u4*`5T,pI3yVzwJ]}_Q"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="7o*67qiS/B-/K{MB0s?r"><field name="TEXT">Aceleración Z: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="d]K5AVpSe+*D^+eVP6{j"><field name="VAR" id="y7vdb+~~]B^LZz76yDr/">z</field></block></value><value name="ADD2"><shadow type="text" id="hT*w%QS5!7KexeFC!;*I"><field name="TEXT"> mg</field></shadow></value></block></value><next><block type="device_show_number" id="3^F!%(.^nd5Jz5YFl.[I"><comment pinned="false" h="80" w="160">Mostrar la aceleración en X en la pantalla de la micro:bit</comment><value name="number"><block type="variables_get" id="{@+Q-BW2~D,79*ZC-KEh"><field name="VAR" id="20QG6cZr)f=qh[IIuVG@">x</field></block></value><next><block type="device_pause" id="Ze)R_M%.YMpRqu~PDW_n"><value name="pause"><shadow type="timePicker" id="qcpa:}b*wPx~CP~b3@bP"><field name="ms">1000</field></shadow></value><next><block type="variables_set" id="=E*0w=)*432DSHN{eRo["><field name="VAR" id="H{dY@@XjSOrAtcz0^q1[">temp</field><comment pinned="false" h="80" w="160">Leer temperatura del sensor interno</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_temperature" id="7yBYsOPDAT5;y}jHOc@^"></block></value><next><block type="serial_writeline" id="Oy:6u1+R.6u]LAnxkfv0"><comment pinned="false" h="80" w="160">Mostrar la temperatura en la consola serial y enviarla por Bluetooth</comment><value name="text"><block type="text_join" id="4{}iTS68S8MmzK%t4f[!"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="[KgcTUb%jwyYR/z#NG~U"><field name="TEXT">Temperatura: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="XZH+m5hs~5/$e.JjYmI0"><field name="VAR" id="H{dY@@XjSOrAtcz0^q1[">temp</field></block></value><value name="ADD2"><shadow type="text" id="Ue(DnJB-mVvf]}Ov,|+$"><field name="TEXT"> °C</field></shadow></value></block></value><next><block type="bluetooth_uart_line" id="W,SyCOVEN`5^PafHA~rb"><value name="data"><block type="text_join" id="WrQ]n*U,n9^09d*N-4G_"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="5I.V$Y?wOj|$FgMM;[e;"><field name="TEXT">Temperatura: </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="^Wq4qNRiA3U|lBp?NwZ,"><field name="VAR" id="H{dY@@XjSOrAtcz0^q1[">temp</field></block></value><value name="ADD2"><shadow type="text" id="@cI-$s~kQ6$:fC1IA,^K"><field name="TEXT"> °C</field></shadow></value></block></value><next><block type="device_show_number" id="uB_lz4BXV/Kvl^D4{Fk]"><comment pinned="false" h="80" w="160">Mostrar la temperatura en la pantalla de la micro:bit</comment><value name="number"><block type="variables_get" id="W{bO%tPz~rVCuCGip6es"><field name="VAR" id="H{dY@@XjSOrAtcz0^q1[">temp</field></block></value><next><block type="device_pause" id="Y%:S^lt@VH;jG4~wbQ;="><value name="pause"><shadow type="timePicker" id="%$uOEjpD]PCl)3p^Swm7"><field name="ms">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="zQenVRchQq,jk/g*Hc+8" x="1186" y="0"><mutation name="setupMAX30102" functionid="f=FGrERMM-M0te7~4_c~"></mutation><field name="function_name">setupMAX30102</field><comment pinned="false" h="80" w="160">Configuración inicial del MAX30102</comment><statement name="STACK"><block type="basic_show_icon" id=";F1p:Qu:Oo1EOM1,W;)w"><field name="i">IconNames.Heart</field><next><block type="i2c_writenumber" id="m,PTxh-GUcj3ng*KN?C,"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Reset del dispositivo</comment><value name="address"><block type="variables_get" id="H#f[~A8ApOan__/*Bz!{"><field name="VAR" id="W/o8#W73s9@BtUYDHt6C">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><block type="variables_get" id="#%1Fn`1jmZN?RrnL`n;Q"><field name="VAR" id="KChT_w}V!1]qu1uKbrrU">MAX30102_MODE_CONFIG</field></block></value><value name="repeat"><shadow type="logic_boolean" id="e0TQR?y.0_Q3!^w|s8IH"><field name="BOOL">FALSE</field></shadow></value><next><block type="i2c_writenumber" id="2YTjV}h2C.lIHcmr8gZg"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Valor de reset</comment><value name="address"><block type="variables_get" id="T`4mMiVo8VFGj#TLr*cK"><field name="VAR" id="W/o8#W73s9@BtUYDHt6C">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="!DVKGd)+_`o#)S9,Kl7("><field name="NUM">64</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="nS}hiX3UxYs_/k?5yl|w"><field name="BOOL">FALSE</field></shadow></value><next><block type="device_pause" id="~3]TB^anvtO2w@#pYK5="><value name="pause"><shadow type="timePicker" id="NJL`t`oRG:ISMkeOpEqu"><field name="ms">100</field></shadow></value><next><block type="i2c_writenumber" id="gT0(dmvSdw/P%r|_.zW4"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Configurar modo de SpO2</comment><value name="address"><block type="variables_get" id="VNK-anX@57!F|ySu(d`o"><field name="VAR" id="W/o8#W73s9@BtUYDHt6C">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><block type="variables_get" id="_kK4rpwcK9Is0(/NKM$~"><field name="VAR" id="?-,MR66$JQ)_uJ=2pHn8">MAX30102_PARTICLE_CONFIG</field></block></value><value name="repeat"><shadow type="logic_boolean" id="L0NkZ1pCLG}B./1g[ub*"><field name="BOOL">FALSE</field></shadow></value><next><block type="i2c_writenumber" id="(R],?9.cs,H1S3wqzlV5"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Modo de SpO2</comment><value name="address"><block type="variables_get" id="H@n=DTU:U|[!u3x09M[:"><field name="VAR" id="W/o8#W73s9@BtUYDHt6C">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="W_IK~J2?i9CJe]c(Sx?J"><field name="NUM">3</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="GNSnj9pog~W7+YdxGRfj"><field name="BOOL">FALSE</field></shadow></value><next><block type="device_pause" id="jdrTtQS1Ow;m{:_m9V3F"><value name="pause"><shadow type="timePicker" id="Gp)J;e:s}(_+pYd?/=P%"><field name="ms">100</field></shadow></value><next><block type="i2c_writenumber" id="Oxe,M$2N:Bv.o6^gPAZ{"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Configurar intensidad de LEDs</comment><value name="address"><block type="variables_get" id="s.sGl431M?]LJ7M(,^zp"><field name="VAR" id="W/o8#W73s9@BtUYDHt6C">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><block type="variables_get" id="nUkU][HI78vYouQ1oS+o"><field name="VAR" id="4(mNtdex@F1dn|7l/!EF">MAX30102_LED_CONFIG</field></block></value><value name="repeat"><shadow type="logic_boolean" id="Y;bVIwE8x)JX9[S%Z9Aa"><field name="BOOL">FALSE</field></shadow></value><next><block type="i2c_writenumber" id="RV@P@:]}H6G[!+as`F.,"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Intensidad del LED rojo</comment><value name="address"><block type="variables_get" id="[!mkYD!(1SX.X]|FbXNL"><field name="VAR" id="W/o8#W73s9@BtUYDHt6C">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="n:q$O.d#e;oyw4Qsg#GS"><field name="NUM">36</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="}/%)AV9s+bK;i0|@)7p5"><field name="BOOL">FALSE</field></shadow></value><next><block type="i2c_writenumber" id="dSr$=qXqGs%OC[oy~Mlg"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Intensidad del LED IR</comment><value name="address"><block type="variables_get" id="qtAo|P@CLU8VxWWG5m9V"><field name="VAR" id="W/o8#W73s9@BtUYDHt6C">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="P0FM;UZK=J:h{E?IKoG^"><field name="NUM">36</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="FK(6.6s0*C@Nx8drSxc0"><field name="BOOL">FALSE</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="$gY8,UA|THSLCeW=+#n9" x="3" y="957"><mutation name="readSensorData" functionid="3nF4*f_E!h(qWZsfx:4H"></mutation><field name="function_name">readSensorData</field><comment pinned="false" h="80" w="160">Leer datos del sensor MAX30102</comment><statement name="STACK"><block type="i2c_writenumber" id="^lLohv%)a!^Q}{:bP.^d"><field name="format">NumberFormat.UInt8LE</field><comment pinned="false" h="80" w="160">Dirección del registro de datos</comment><value name="address"><block type="variables_get" id="z.8q]ad#t~b89Ly2ouSQ"><field name="VAR" id="W/o8#W73s9@BtUYDHt6C">MAX30102_I2C_ADDRESS</field></block></value><value name="value"><shadow type="math_number" id="nd`8vNhSxvlxhn:)t{TQ"><field name="NUM">6</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id=")H}mokZtI}Tbe^w*9*G|"><field name="BOOL">FALSE</field></shadow></value><next><block type="variables_set" id="@h/*QysiXBW-/27R1I4K"><field name="VAR" id="m=?6,_e0sTjeNL,+7I!N">data2</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="pins_i2c_readnumber" id="im.+Z/r_rG`2CKFGvXoM"><field name="format">NumberFormat.UInt16BE</field><value name="address"><block type="variables_get" id="U*?{U2Qpl+?M{cuXjjXb"><field name="VAR" id="W/o8#W73s9@BtUYDHt6C">MAX30102_I2C_ADDRESS</field></block></value><value name="repeat"><shadow type="logic_boolean" id="i;M(9e*i8^!Rmnd:cHC4"><field name="BOOL">FALSE</field></shadow></value></block></value><next><block type="function_return" id="2t{WWxZj;(V,VVV3cSDH"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="$`!V;H=N@EB+,VM}%e6-"><field name="VAR" id="m=?6,_e0sTjeNL,+7I!N">data2</field></block></value></block></next></block></next></block></statement></block></xml>